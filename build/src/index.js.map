{"version":3,"sources":["../../server/src/index.js"],"names":["cloudinary","config","cloud_name","api_key","api_secret","mongoDB","connection","mongoose","connect","db","on","console","error","bind","once","log","app","Port","process","env","PORT","use","secret","resave","saveUninitialized","cookie","secure","req","res","next","locals","messages","require","bodyParser","urlencoded","extended","json","express","static","path","resolve","__dirname","webpackConfig","set","join","get","sendfile","post","url","decodeURIComponent","query","search","response","body","title","isbn","description","coverages","coverage","data","$","cheerio","load","content","Array","from","forEach","journal","index","children","find","each","i","cite","name","push","link","firstChild","attribs","text","send","render","Article","_id","params","articleID","err","articles","files","status","image","thumbnail","uploader","upload","result","article","articleTitle","author","authorname","branch","volume","issues","pages","publishedDate","articleContent","tcontent","abstract","paper","roi","save","handleError","redirect","keyword","arts","filter","art","includes","id","articleId","articleModified","updateOne","deleteOne","listen"],"mappings":"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","file":"index.js","sourcesContent":["import express from 'express';\nimport path from 'path';\nimport Crawler from \"crawler\";\nimport request from \"request\";\nimport cheerio from \"cheerio\";\nimport bodyParser from 'body-parser';\nimport webpack from 'webpack';\nimport webpackMiddleware from 'webpack-dev-middleware';\nimport webpackConfig from '../../webpack.config';\n// import { scrapeRoute } from './route/index';\nimport session  from 'express-session';\nimport expressValidator from 'express-validator';\nimport flash from 'connect-flash';\nimport pug from 'pug';\nimport mongoose from 'mongoose';\nimport Article from './models/articles';\nimport cloudinary from 'cloudinary';\nimport upload from 'express-fileupload';\n\n// cloudinary configuration\ncloudinary.config({ \n  cloud_name: 'dsxfchez8', \n  api_key: '557836499496183', \n  api_secret: 'PKUHg16h73APhZPubaRw25mfbdE' \n});\n\n\nconst mongoDB = 'mongodb://root:test123@ds255260.mlab.com:55260/algorithmanalysis';\n// database connection\nconst connection = mongoose.connect(mongoDB);\n \nlet db = mongoose.connection;\ndb.on('error', console.error.bind(console, 'connection error:'));\ndb.once('open', function() {\n  // we're connected!\n  console.log('connected')\n});\n\n// starting app\nconst app = express();\n\n\nconst Port = process.env.PORT || 5000;\n// console.log(process.env)\n\n// Express session\n// app.set('trust proxy', 1) // trust first proxy\napp.use(session({\n  secret: 'keyboard cat',\n  resave: false,\n  saveUninitialized: true,\n  cookie: { secure: true }\n}));\n\n// Express message\napp.use(flash());\napp.use((req, res, next) => {\n  res.locals.messages = require('express-messages')(req, res);\n  next();\n});\n\n// parse application/x-www-form-urlencoded\napp.use(bodyParser.urlencoded({\n  extended: false\n}))\n\n// file upload\napp.use(upload());\n\n// // parse application/json\napp.use(bodyParser.json())\n\n// load static files=============\napp.use(express.static(path.resolve(__dirname, '../../client/public')));\n \n// =============================\napp.use(webpackMiddleware(webpack(webpackConfig)));\n// =======================================\n\napp.set('view engine', 'pug');\napp.set(\"views\", path.join(__dirname, \"views\"));\n\n\napp.get('/', (req, res) => {\n  res.sendfile(path.resolve(__dirname, '../../client/public/index.html'));\n});\n\napp.get('/contact', (req, res) => {\n  res.sendfile(path.resolve(__dirname, '../../client/public/index.html'));\n});\n\n/**\n * start scrapper\n */\n\n\napp.post('/search', (req, res) => {\n  // console.log(req.query)\n  let url = decodeURIComponent(req.query.search);\n  // console.log(url)\n\n  request(url, function (error, response, body) {\n    let title, isbn, description, coverages, coverage;\n    coverages = [];\n    coverage = [];\n    let data = [];\n\n    if (!error) {\n      let $ = cheerio.load(body)\n\n      let content = Array.from($('#results > form > ul > li'));\n      content.forEach((journal, index) => {\n        title = journal.children[0].children[0].data;\n        isbn = journal.children[1].data;\n        description = journal.children[1].next.next.data;\n        // \n        $(journal).find(\"div > ul\").each((i, cite) => {\n          coverage = [];\n          cite.children.forEach(name => {\n            if (name.name === 'li') {\n              // console.log(name.firstChild.attribs)\n              coverage.push({\n                link: (name.firstChild.attribs),\n                text: name.firstChild.children[0].data\n              });\n\n\n            }\n          });\n\n        })\n        //  coverage.push(coverages);\n        data.push({\n          title,\n          isbn,\n          description,\n          coverage\n        });\n\n      })\n\n      res.send(data);\n    } else {\n      console.log(\"Weâ€™ve encountered an error: \" + error);\n    }\n  });\n});\n\n// GET ROUTES\napp.get('/scienceweb', (req, res) => res.render('index'));\n\napp.get('/login', (req, res) => res.render('login') );\napp.get('/scienceweb/pricing', (req, res) => res.render('pricing'));\napp.get('/scienceweb/institution-signup/:price', (req, res) => res.render('register'));\napp.get('/scienceweb/payment_summary', (req, res) => res.render('payment_summary'));\napp.get('/scienceweb/searchResult', (req, res) => res.render('search_result'));\napp.get('/scienceweb/search/:articleID', (req, res) => {\n  Article.find({_id: req.params.articleID},(err, articles) => {\n    res.render('search_details', {articles})\n  })\n});\napp.get('/scienceweb/addArticle', (req, res) => res.render('addarticle'));\napp.get('/scienceweb/articles', (req, res) =>{\n  Article.find((err, articles) => {\n    // console.log(articles);\n    res.render('articles', {articles});\n  });\n  \n});\n\n// POST ROUTES creating articles\napp.post('/scienceweb/addArticle', (req, res) => {\n  if (!req.files)\n    return res.status(400).send('No files were uploaded.');\n \n  // The name of the input field (i.e. \"sampleFile\") is used to retrieve the uploaded file\n  let image = req.files.thumbnail;\n    console.log(image)\n    // let file = req.files.filename,\n    //     filename = filename;\n    //     file.mv('../upload/'+filename);\n  // console.log(__dirname, req.body.thumbnail);\n  cloudinary.uploader.upload(__dirname+'/'+req.body.thumbnail, function(result) { \n    console.log(result) \n  });\n\n  let article = new Article({\n    title: req.body.articleTitle,\n    author:  req.body.authorname,\n    branch:  req.body.branch,\n    volume:  req.body.volume,\n    issues:  req.body.issues,\n    pages:  req.body.pages,\n    publishedDate:  req.body.publishedDate,\n    articleContent:  req.body.tcontent,\n    abstract:  req.body.abstract,\n    thumbnail: req.body.thumbnail,\n    paper: req.body.paper,\n    roi: req.body.roi\n  });\n\n  // save the newly created article\n  article.save((err) => {\n    if (err) return handleError(err);\n    // saved!\n    console.log('article was created');\n  });\n  res.redirect('/scienceweb/articles')\n  \n});\n\n\n// post search result \napp.post('/scienceweb/searchResult', (req, res) => {\n  // console.log(req.body.search)\n  let keyword = req.body.search;\n  let articles = [];\n  Article.find( (err, arts) => {\n    arts.filter(art => {\n      // console.log(art.title)\n     if( art.title.includes(keyword)) {\n        articles.push(art);\n      }\n    })\n    // console.log(articles);\n    res.render('search_result', {articles, keyword});\n  });\n});\n\n// EDIT ARTICLE\napp.get('/scienceweb/article/edit', (req, res) => {\n  let id = req.query.articleId;\n  Article.find({_id: id}, (err, articles) => {\n    res.render('editArticle', {articles})\n  })\n});\n\n// UPDATE EDITTED ARTICLES\napp.post('/scienceweb/article/update', (req, res) => {\n  // console.log(req.params.id);\n\n  let id = req.body.id;\n  let articleModified = {\n    title: req.body.articleTitle,\n    author:  req.body.authorname,\n    branch:  req.body.branch,\n    volume:  req.body.volume,\n    issues:  req.body.issues,\n    pages:  req.body.pages,\n    publishedDate:  req.body.publishedDate,\n    articleContent:  req.body.tcontent,\n    abstract:  req.body.abstract,\n    thumbnail: req.body.thumbnail,\n    paper: req.body.paper,\n    roi: req.body.roi\n  }\n  Article.updateOne({ _id: id }, articleModified, function(err, res) {\n    console.log(res);\n\n  });\n  res.redirect('/scienceweb/articles');\n});\n\n//DELETE ARTICLE\napp.post('/scienceweb/article/delete', (req, res) => {\n  let id = req.body.id;\n  Article.deleteOne({ _id: id }, (err) => {\n    if (err) return handleError(err);\n    \n    // deleted at most one tank document\n    res.redirect('/scienceweb/articles');\n    console.log('success');\n\n  });\n});\n\napp.listen(Port, (req, res) => console.log('server started http://localhost:' + Port));"]}