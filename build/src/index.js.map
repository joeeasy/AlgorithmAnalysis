{"version":3,"sources":["../../server/src/index.js"],"names":["cloudinary","config","cloud_name","api_key","api_secret","mongoDB","connection","mongoose","connect","db","on","console","error","bind","once","log","app","use","req","res","next","headers","redirect","hostname","url","Port","process","env","PORT","secret","resave","saveUninitialized","cookie","secure","locals","messages","require","bodyParser","urlencoded","extended","json","express","static","path","resolve","__dirname","webpackConfig","set","join","get","sendfile","post","decodeURIComponent","query","search","response","body","title","isbn","description","coverages","coverage","data","$","cheerio","load","content","Array","from","forEach","journal","index","children","find","each","i","cite","name","push","link","firstChild","attribs","text","send","render","Article","_id","params","articleID","err","articles","files","status","image","thumbnail","uploader","upload","result","article","articleTitle","author","authorname","branch","volume","issues","pages","publishedDate","articleContent","tcontent","abstract","paper","roi","save","handleError","keyword","arts","filter","art","includes","id","articleId","articleModified","updateOne","deleteOne","listen"],"mappings":"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","file":"index.js","sourcesContent":["import express from 'express';\nimport path from 'path';\nimport Crawler from \"crawler\";\nimport request from \"request\";\nimport cheerio from \"cheerio\";\nimport bodyParser from 'body-parser';\nimport webpack from 'webpack';\nimport webpackMiddleware from 'webpack-dev-middleware';\nimport webpackConfig from '../../webpack.config';\n// import { scrapeRoute } from './route/index';\nimport session  from 'express-session';\nimport expressValidator from 'express-validator';\nimport flash from 'connect-flash';\nimport pug from 'pug';\nimport mongoose from 'mongoose';\nimport Article from './models/articles';\nimport cloudinary from 'cloudinary';\nimport upload from 'express-fileupload';\n\n// cloudinary configuration\ncloudinary.config({ \n  cloud_name: 'dsxfchez8', \n  api_key: '557836499496183', \n  api_secret: 'PKUHg16h73APhZPubaRw25mfbdE' \n});\n\n\nconst mongoDB = 'mongodb://root:test123@ds255260.mlab.com:55260/algorithmanalysis';\n// database connection\nconst connection = mongoose.connect(mongoDB);\n \nlet db = mongoose.connection;\ndb.on('error', console.error.bind(console, 'connection error:'));\ndb.once('open', function() {\n  // we're connected!\n  console.log('connected')\n});\n\n// starting app\nconst app = express();\napp.use(function (req, res, next){\n  if (req.headers['x-forwarded-proto'] === 'https') {\n    res.redirect('http://' + req.hostname + req.url);\n  } else {\n    next();\n  }\n});\n\nconst Port = process.env.PORT || 5000;\n// console.log(process.env)\n\n// Express session\n// app.set('trust proxy', 1) // trust first proxy\napp.use(session({\n  secret: 'keyboard cat',\n  resave: false,\n  saveUninitialized: true,\n  cookie: { secure: true }\n}));\n\n// Express message\napp.use(flash());\napp.use((req, res, next) => {\n  res.locals.messages = require('express-messages')(req, res);\n  next();\n});\n\n// parse application/x-www-form-urlencoded\napp.use(bodyParser.urlencoded({\n  extended: false\n}))\n\n// file upload\napp.use(upload());\n\n// // parse application/json\napp.use(bodyParser.json())\n\n// load static files=============\napp.use(express.static(path.resolve(__dirname, '../../client/public')));\n \n// =============================\napp.use(webpackMiddleware(webpack(webpackConfig)));\n// =======================================\n\napp.set('view engine', 'pug');\napp.set(\"views\", path.join(__dirname, \"views\"));\n\n\napp.get('/', (req, res) => {\n  res.sendfile(path.resolve(__dirname, '../../client/public/index.html'));\n});\n\napp.get('/contact', (req, res) => {\n  res.sendfile(path.resolve(__dirname, '../../client/public/index.html'));\n});\n\n/**\n * start scrapper\n */\n\n\napp.post('/search', (req, res) => {\n  // console.log(req.query)\n  let url = decodeURIComponent(req.query.search);\n  // console.log(url)\n\n  request(url, function (error, response, body) {\n    let title, isbn, description, coverages, coverage;\n    coverages = [];\n    coverage = [];\n    let data = [];\n\n    if (!error) {\n      let $ = cheerio.load(body)\n\n      let content = Array.from($('#results > form > ul > li'));\n      content.forEach((journal, index) => {\n        title = journal.children[0].children[0].data;\n        isbn = journal.children[1].data;\n        description = journal.children[1].next.next.data;\n        // \n        $(journal).find(\"div > ul\").each((i, cite) => {\n          coverage = [];\n          cite.children.forEach(name => {\n            if (name.name === 'li') {\n              // console.log(name.firstChild.attribs)\n              coverage.push({\n                link: (name.firstChild.attribs),\n                text: name.firstChild.children[0].data\n              });\n\n\n            }\n          });\n\n        })\n        //  coverage.push(coverages);\n        data.push({\n          title,\n          isbn,\n          description,\n          coverage\n        });\n\n      })\n\n      res.send(data);\n    } else {\n      console.log(\"We’ve encountered an error: \" + error);\n    }\n  });\n});\n\n// GET ROUTES\napp.get('/scienceweb', (req, res) => res.render('index'));\n\napp.get('/login', (req, res) => res.render('login') );\napp.get('/scienceweb/pricing', (req, res) => res.render('pricing'));\napp.get('/scienceweb/institution-signup/:price', (req, res) => res.render('register'));\napp.get('/scienceweb/payment_summary', (req, res) => res.render('payment_summary'));\napp.get('/scienceweb/searchResult', (req, res) => res.render('search_result'));\napp.get('/scienceweb/search/:articleID', (req, res) => {\n  Article.find({_id: req.params.articleID},(err, articles) => {\n    res.render('search_details', {articles})\n  })\n});\napp.get('/scienceweb/addArticle', (req, res) => res.render('addarticle'));\napp.get('/scienceweb/articles', (req, res) =>{\n  Article.find((err, articles) => {\n    // console.log(articles);\n    res.render('articles', {articles});\n  });\n  \n});\n\n// POST ROUTES creating articles\napp.post('/scienceweb/addArticle', (req, res) => {\n  if (!req.files)\n    return res.status(400).send('No files were uploaded.');\n \n  // The name of the input field (i.e. \"sampleFile\") is used to retrieve the uploaded file\n  let image = req.files.thumbnail;\n    console.log(image)\n    // let file = req.files.filename,\n    //     filename = filename;\n    //     file.mv('../upload/'+filename);\n  // console.log(__dirname, req.body.thumbnail);\n  cloudinary.uploader.upload(__dirname+'/'+req.body.thumbnail, function(result) { \n    console.log(result) \n  });\n\n  let article = new Article({\n    title: req.body.articleTitle,\n    author:  req.body.authorname,\n    branch:  req.body.branch,\n    volume:  req.body.volume,\n    issues:  req.body.issues,\n    pages:  req.body.pages,\n    publishedDate:  req.body.publishedDate,\n    articleContent:  req.body.tcontent,\n    abstract:  req.body.abstract,\n    thumbnail: req.body.thumbnail,\n    paper: req.body.paper,\n    roi: req.body.roi\n  });\n\n  // save the newly created article\n  article.save((err) => {\n    if (err) return handleError(err);\n    // saved!\n    console.log('article was created');\n  });\n  res.redirect('/scienceweb/articles')\n  \n});\n\n\n// post search result \napp.post('/scienceweb/searchResult', (req, res) => {\n  // console.log(req.body.search)\n  let keyword = req.body.search;\n  let articles = [];\n  Article.find( (err, arts) => {\n    arts.filter(art => {\n      // console.log(art.title)\n     if( art.title.includes(keyword)) {\n        articles.push(art);\n      }\n    })\n    // console.log(articles);\n    res.render('search_result', {articles, keyword});\n  });\n});\n\n// EDIT ARTICLE\napp.get('/scienceweb/article/edit', (req, res) => {\n  let id = req.query.articleId;\n  Article.find({_id: id}, (err, articles) => {\n    res.render('editArticle', {articles})\n  })\n});\n\n// UPDATE EDITTED ARTICLES\napp.post('/scienceweb/article/update', (req, res) => {\n  // console.log(req.params.id);\n\n  let id = req.body.id;\n  let articleModified = {\n    title: req.body.articleTitle,\n    author:  req.body.authorname,\n    branch:  req.body.branch,\n    volume:  req.body.volume,\n    issues:  req.body.issues,\n    pages:  req.body.pages,\n    publishedDate:  req.body.publishedDate,\n    articleContent:  req.body.tcontent,\n    abstract:  req.body.abstract,\n    thumbnail: req.body.thumbnail,\n    paper: req.body.paper,\n    roi: req.body.roi\n  }\n  Article.updateOne({ _id: id }, articleModified, function(err, res) {\n    console.log(res);\n\n  });\n  res.redirect('/scienceweb/articles');\n});\n\n//DELETE ARTICLE\napp.post('/scienceweb/article/delete', (req, res) => {\n  let id = req.body.id;\n  Article.deleteOne({ _id: id }, (err) => {\n    if (err) return handleError(err);\n    \n    // deleted at most one tank document\n    res.redirect('/scienceweb/articles');\n    console.log('success');\n\n  });\n});\n\napp.listen(Port, (req, res) => console.log('server started http://localhost:' + Port));"]}