{"version":3,"sources":["../../server/src/index.js"],"names":["app","Port","process","env","PORT","use","express","static","path","resolve","__dirname","webpackConfig","get","req","res","sendfile","url","query","word","error","response","body","$","cheerio","load","allBody","content","html","console","log","children","send","listen"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;AACA,IAAMA,MAAM,wBAAZ;;AAEA,IAAMC,OAAO,QAAQC,QAAQC,GAAR,CAAYC,IAAjC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACAJ,IAAIK,GAAJ,CAAQC,kBAAQC,MAAR,CAAeC,eAAKC,OAAL,CAAaC,SAAb,EAAwB,qBAAxB,CAAf,CAAR;AACA;AACAV,IAAIK,GAAJ,CAAQ,oCAAkB,uBAAQM,iBAAR,CAAlB,CAAR;AACA;;;AAGA;;AAEAX,IAAIY,GAAJ,CAAQ,IAAR,EAAc,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC1BA,MAAIC,QAAJ,CAAaP,eAAKC,OAAL,CAAaC,SAAb,EAAwB,gCAAxB,CAAb;AACD,CAFD;;AAIA;;;;AAIAV,IAAIY,GAAJ,CAAQ,SAAR,EAAmB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC/B,MAAIE,2EAAyEH,IAAII,KAAJ,CAAUC,IAAvF;;AAEC,yBAAQF,GAAR,EAAa,UAAUG,KAAV,EAAiBC,QAAjB,EAA2BC,IAA3B,EAAiC;AAC5C,QAAI,CAACF,KAAL,EAAY;AACV,UAAIG,IAAIC,kBAAQC,IAAR,CAAaH,IAAb,CAAR;AACA,UAAII,gBAAJ;;AAEA;AACA,UAAIC,UAAUJ,EAAE,MAAF,EAAUK,IAAV,EAAd;AACAF,gBAAUH,EAAE,aAAF,CAAV;AACA;;AAEAM,cAAQC,GAAR,CAAY,UAAUb,GAAtB;AACAY,cAAQC,GAAR,CAAY,SAAZ;AACAD,cAAQC,GAAR,CAAY,eAAZ;AACAD,cAAQC,GAAR,CAAYJ,QAAQK,QAAR,EAAZ;AACAhB,UAAIiB,IAAJ,CAASL,OAAT;AACD,KAdD,MAeK;AACHE,cAAQC,GAAR,CAAY,iCAAiCV,KAA7C;AACD;AACF,GAnBD;AAqBD,CAxBF;;AA0BAnB,IAAIgC,MAAJ,CAAW/B,IAAX,EAAiB,UAACY,GAAD,EAAMC,GAAN;AAAA,SAAcc,QAAQC,GAAR,CAAY,qCAAmC5B,IAA/C,CAAd;AAAA,CAAjB","file":"index.js","sourcesContent":["import express from 'express';\nimport path from 'path';\nimport Crawler  from \"crawler\";\nimport request  from \"request\";\nimport cheerio  from \"cheerio\";\nimport bodyParser from 'body-parser';\nimport webpack from 'webpack';\nimport webpackMiddleware from 'webpack-dev-middleware';\nimport webpackConfig from '../../webpack.config';\n\n// starting app\nconst app = express();\n\nconst Port = 5000 || process.env.PORT;\n// console.log(process.env)\n\n// parse application/x-www-form-urlencoded\n// app.use(bodyParser.urlencoded({ extended: false }))\n \n// // parse application/json\n// app.use(bodyParser.json())\n \n// app.use(function (req, res) {\n//   res.setHeader('Content-Type', 'text/plain')\n//   res.write('you posted:\\n')\n//   res.end(JSON.stringify(req.body, null, 2))\n// })\n// load static files=============\napp.use(express.static(path.resolve(__dirname, '../../client/public')));\n// =============================\napp.use(webpackMiddleware(webpack(webpackConfig)));\n// =======================================\n\n\n// app.use(express.static(path.resolve(__dirname, '../../client/public')));\n\napp.get('/*', (req, res) => {\n  res.sendfile(path.resolve(__dirname, '../../client/public/index.html'));\n});\n\n/**\n * start scrapper\n */\n\napp.get('/scrape', (req, res) => {\n  var url = `http://mjl.clarivate.com/cgi-bin/jrnlst/jlresults.cgi?PC=A&Word=${req.query.word}`;\n \n   request(url, function (error, response, body) {\n     if (!error) {\n       var $ = cheerio.load(body)\n       let allBody;\n \n       // var title = $('title').text();\n       var content = $('body').html();\n       allBody = $('p.alphalink');\n       // var freeArticles = $('.central-featured-lang.lang1 a small').text()\n \n       console.log('URL: ' + url);\n       console.log('Title: ' );\n       console.log('EN articles: ');\n       console.log(allBody.children())\n       res.send(content)\n     }\n     else {\n       console.log(\"Weâ€™ve encountered an error: \" + error);\n     }\n   });\n \n })\n\napp.listen(Port, (req, res) => console.log('server started http://localhost:'+Port))"]}